<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="joa.helpdesk">
  	<insert id="QuestionInsert" parameterType="joa.helpdesk.model.JoaHelpQuestionDTO">
			insert into
			helpquestion
			values(helpquestion_idx.nextval,
			#{type},
			#{region},
			#{cinema},
			#{id},
			#{email},
			#{subject},
			#{content},
			sysdate,
			#{state},
			#{answerwrite},
			#{answercontent},
			#{answerrank},
			#{answerdate},
			sysdate
			)
	</insert>
		
	<select id="QuestionList" resultType="joa.helpdesk.model.JoaHelpQuestionDTO">
			select
			*
			from
			helpquestion order by idx
	</select>
	
	<select id="SerchQuestionList" resultType="joa.helpdesk.model.JoaHelpQuestionDTO">
			select
			*
			from
			helpquestion order by idx
			where type=#{type}
			and
			region=#{region}
			and
			chinema=#{chinema}
	</select>
	
	<select id="QuestionBorder">
			select
			*
			from
			helpquestion
			where idx=#{idx}
	</select>
	
	<update id="QuestionAnswer" parameterType="joa.helpdesk.model.JoaHelpQuestionDTO">
	
		update
		helpquestion
		set 
		state=#{state},
		answerwrite=#{answerwrite},
		answercontent=#{answercontent},
		answerrank=#{answerrank},
		answerdate=sysdate

	</update>
	
	<update id="QuestionReAnswer" parameterType="joa.helpdesk.model.JoaHelpQuestionDTO">
	
		update
		helpquestion
		set 
		state=#{state},
		answerwrite=#{answerwrite},
		answercontent=#{answercontent},
		answerrank=#{answerrank},
		reanswerdate=sysdate
		
	</update>
	
	<insert id="ManyHelpInsert" parameterType="joa.helpdesk.model.JoaManyHelpDTO">
			insert into
			lookingforquestion
			values(lookingforquestion_idx.nextval,
			#{type},
			#{subject},
			#{content},
			sysdate,
			sysdate
			)
	</insert>
	
	<delete id="ManyHelpDelete" parameterType="joa.helpdesk.model.JoaManyHelpDTO">
		delete
		from
		lookingforquestion
		where idx=#{idx}
	</delete>
	
	<update id="ManyHelpUpdate" parameterType="joa.helpdesk.model.JoaManyHelpDTO">
		update
		lookingforquestion
		set
		type=#{type},
		subject=#{subject},
		content=#{content},
		writedate=#{writedate},
		rewritedate=sysdate
		
	</update>
	
	<select id="ManyHelpList" resultType="joa.helpdesk.model.JoaManyHelpDTO">
	
		select
			*
		from
		lookingforquestion order by idx
	
	</select>
	
	<select id="SerchManyHelpList" resultType="joa.helpdesk.model.JoaManyHelpDTO">
	
		select
			*
		from
		lookingforquestion order by idx
		where type=#{type}
	</select>
	
	<select id="ManyHelpBorder">
			select
			*
			from
			lookingforquestion
			where idx=#{idx}
	</select>
	
	<insert id="NoticeInsert" parameterType="joa.helpdesk.model.JoaNoticeDTO">
			insert into
			notice
			values(lookingforquestion_idx.nextval,
			#{type},
			#{subject},
			#{content},
			#{file},
			sysdate,
			sysdate
			)
	</insert>
	
	<delete id="NoticeDelete" parameterType="joa.helpdesk.model.JoaNoticeDTO">
		delete
		from
		notice
		where idx=#{idx}
	</delete>
	
	<update id="NoticeUpdate" parameterType="joa.helpdesk.model.JoaNoticeDTO">
		update
		notice
		set
		type=#{type},
		subject=#{subject},
		content=#{content},
		file=#{file},
		writedate=#{writedate},
		rewritedate=sysdate
		
	</update>
	
	<select id="NoticeList" resultType="joa.helpdesk.model.JoaNoticeDTO">
	
		select
			*
		from
		notice order by idx
	
	</select>
	
	<select id="SerchNoticeList" resultType="joa.helpdesk.model.JoaNoticeDTO">
	
		select
			*
		from
		notice order by idx
		where type=#{type}
	</select>
	
	<select id="NoticeBorder">
			select
			*
			from
			notice
			where idx=#{idx}
	</select>
	
	
  </mapper>